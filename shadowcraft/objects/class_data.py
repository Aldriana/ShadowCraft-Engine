from shadowcraft.core import exceptions

class Util(object):
# This should have its own GameClass(object) architecture at some point.

    GAME_CLASS_NUMBER = {
        1:"warrior", 2:"paladin", 3:"hunter", 4:"rogue",
        5:"priest", 6:"death_knight", 7:"shaman", 8:"mage", 9:"warlock",
        10:"monk", 11:"druid"
    }

    AGI_CRIT_INTERCEPT_VALUES = [
        0.000000000000000,    0.050000000745058,    0.050000000745058,   -0.015300000086427,   -0.003000000026077,
        0.031800001859665,    0.050000000745058,    0.029200000688434,    0.034499999135733,    0.026200000196695,
        0.074799999594688,    0.074799999594688,
    ]

    SPELL_SCALING_VALUES = [
        [],
        [],
        [],
        [],
        [
              37.297119140625000,   38.664085388183594,   39.575397491455078,   40.182941436767578,   40.587966918945312,
              41.398025512695312,   43.448474884033203,   45.498928070068359,   47.549381256103516,   49.599834442138672,
              51.650287628173828,   53.700740814208984,   55.751190185546875,   59.506370544433594,   63.464359283447266,
              67.625152587890625,   71.988761901855469,   76.555175781250000,   81.324394226074219,   86.296417236328125,
              90.327865600585938,   94.427680969238281,   98.588249206542969,  102.801979064941406,  107.061256408691406,
             111.358489990234375,  115.686058044433594,  120.036361694335938,  124.401786804199219,  128.774749755859375,
             133.147628784179688,  137.512817382812500,  141.862716674804688,  146.189712524414062,  150.486206054687500,
             154.744598388671875,  158.957290649414062,  163.116653442382812,  167.215087890625000,  171.244995117187500,
             182.127532958984375,  193.476638793945312,  205.302459716796875,  217.615112304687500,  230.424774169921875,
             243.741546630859375,  257.575592041015625,  271.937042236328125,  286.836029052734375,  302.282745361328125,
             318.287261962890625,  334.859741210937500,  352.010345458984375,  369.749206542968750,  388.086425781250000,
             407.032226562500000,  426.596649169921875,  446.789916992187500,  510.141021728515625,  532.945800781250000,
             552.214721679687500,  571.938354492187500,  592.121704101562500,  612.769897460937500,  633.887939453125000,
             655.481018066406250,  677.554077148437500,  700.112243652343750,  723.160583496093750,  746.704162597656250,
             770.748107910156250,  795.297363281250000,  820.357116699218750,  845.932373046875000,  872.028198242187500,
             898.649719238281250,  925.802001953125000,  953.490051269531250,  981.718994140625000, 1010.493896484375000,
            1032.933593750000000, 1055.626708984375000, 1078.573486328125000, 1101.773681640625000, 1125.227416992187500,
            1148.934570312500000, 1172.895385742187500, 1197.109619140625000, 1221.577270507812500, 1246.298583984375000,
        ],
        [],
        [],
        [],
        [],
        [],
        [],
        [],
    ]

    AGI_PER_CRIT_VALUES = [
        [],
        [],
        [],
        [],
        [
               2.234094142913818,    2.331228971481323,    2.428363323211670,    2.622632265090942,    2.719766616821289,
               2.816901445388794,    3.011170148849487,    3.108304500579834,    3.205439567565918,    3.399708032608032,
               3.788246154785156,    4.176784992218018,    4.662456989288330,    5.050994873046875,    5.633802890777588,
               6.022340297698975,    6.410876750946045,    6.896551609039307,    7.382225990295410,    7.867895126342773,
               8.353569984436035,    8.742107391357422,    9.227782249450684,    9.616318702697754,   10.199128150939941,
              10.684799194335938,   11.073339462280273,   11.559009552001953,   12.044680595397949,   12.627490043640137,
              13.016019821166992,   13.501690864562988,   13.987363815307617,   14.473036766052246,   15.055842399597168,
              15.541511535644531,   15.930060386657715,   16.415725708007812,   16.901399612426758,   17.484230041503906,
              17.969871520996094,   18.455564498901367,   18.941223144531250,   19.524042129516602,   20.106847763061523,
              20.592529296875000,   21.078191757202148,   21.563854217529297,   22.049549102783203,   22.729494094848633,
              23.215160369873047,   23.700838088989258,   24.283632278442383,   24.769273757934570,   25.352140426635742,
              25.934886932373047,   26.420568466186523,   27.003381729125977,   27.489067077636719,   28.169013977050781,
              29.917457580566406,   31.083024978637695,   32.637184143066406,   33.802856445312500,   34.968460083007812,
              36.134086608886719,   37.299655914306641,   38.173912048339844,   39.048007965087891,   40.019371032714844,
              43.030555725097656,   46.333190917968750,   49.830078125000000,   53.618152618408203,   57.697746276855469,
              62.069007873535156,   66.828392028808594,   71.879356384277344,   77.319190979003906,   83.146942138671875,
             108.695663452148438,  142.857147216796875,  188.679244995117188,  250.000000000000000,  322.580657958984375,
             422.838226318359375,  555.987243652343750,  730.520507812500000,  959.033020019531250, 1259.518066406250000,
        ],
        [],
        [],
        [],
        [],
        [],
        [],
        [],
    ]

    def get_class_number(self, game_class):
        for i in self.GAME_CLASS_NUMBER.keys():
            if self.GAME_CLASS_NUMBER[i] == game_class:
                return i
        raise exceptions.InvalidInputException(_('{game_class} is not a supported game class').format(game_class=game_class))

    def get_spell_scaling(self, game_class, level):
        return self.SPELL_SCALING_VALUES[self.get_class_number(game_class)][level - 1]

    def get_agi_per_crit(self, game_class, level):
        return self.AGI_PER_CRIT_VALUES[self.get_class_number(game_class)][level - 1]

    def get_agi_intercept(self, game_class):
        return self.AGI_CRIT_INTERCEPT_VALUES[self.get_class_number(game_class)]
